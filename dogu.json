{
  "Name": "official/cas",
  "Version": "4.0.7.20-16",
  "DisplayName": "Central Authentication Service",
  "Description": "The Central Authentication Service (CAS) is a single sign-on protocol for the web.",
  "Url": "http://jasig.github.io/cas",
  "Category": "Base",
  "Tags": [
    "authentication",
    "sso",
    "cas"
  ],
  "Logo": "https://cloudogu.com/images/dogus/cas.png",
  "Image": "registry.cloudogu.com/official/cas",
  "Dependencies": [
    "nginx"
  ],
  "OptionalDependencies": [
    "ldap"
  ],
  "Configuration": [
    {
      "Name": "limit/max_number",
      "Description": "Max number of login retries (0 means disabled)",
      "Optional": true
    },
    {
      "Name": "limit/failure_store_time",
      "Description": "Max time to store failed logins (in seconds); has to be set > 0 when limit/max_number is > 0",
      "Optional": true
    },
    {
      "Name": "limit/lock_time",
      "Description": "Time to lock an account if limit/max_number is reached (in seconds); has to be set > 0 when limit/max_number is > 0",
      "Optional": true
    },
    {
      "Name": "forgot_password_text",
      "Description": "Text which shall be shown if a user clicks 'Forgot Password'",
      "Optional": true
    },
    {
      "Name": "legal_urls/terms_of_service",
      "Description": "This URL links to the Terms of Service and will be the first link at the bottom of login or logout pages. If empty the whole link will be omitted. If changed the CAS dogu must be restarted to take effect.",
      "Optional": true
    },
    {
      "Name": "legal_urls/imprint",
      "Description": "This URL links to the Imprint and will be the second link at the bottom of login or logout pages. If empty the whole link will be omitted. If changed the CAS dogu must be restarted to take effect.",
      "Optional": true
    },
    {
      "Name": "legal_urls/privacy_policy",
      "Description": "This URL links to the Privacy Policy and will be the last link at the bottom of login or logout pages. If empty the whole link will be omitted. If changed the CAS dogu must be restarted to take effect.",
      "Optional": true
    },
    {
      "Name": "session_tgt/max_time_to_live_in_seconds",
      "Description": "Maximum session timeout - TGT will expire after defined timespan regardless the usage",
      "Optional": true
    },
    {
      "Name": "session_tgt/time_to_kill_in_seconds",
      "Description": "Idle session timeout -  TGT will expire sooner if no further requests keep the session alive",
      "Optional": true
    },
    {
      "Name": "ldap/host",
      "Description": "The host of the LDAP (without protocol and without port)",
      "Optional": false
    },
    {
      "Name": "ldap/port",
      "Description": "The port of the LDAP",
      "Optional": false
    },
    {
      "Name": "ldap/base_dn",
      "Description": "Base DN of users to be authenticated",
      "Optional": true
    },
    {
      "Name": "ldap/connection_dn",
      "Description": "Manager DN for authenticated searches",
      "Optional": true
    },
    {
      "Name": "ldap/password",
      "Description": "The password in encrypted form",
      "Optional": true
    },
    {
      "Name": "ldap/search_filter",
      "Description": "Search filter used for configurations that require searching for DNs",
      "Optional": true
    },
    {
      "Name": "ldap/ds_type",
      "Description": "Type of the LDAP",
      "Optional": true,
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "embedded",
          "external"
        ]
      }
    },
    {
      "Name": "ldap/encryption",
      "Description": "Type of the encryption of the LDAP",
      "Optional": true,
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "ssl",
          "sslAny",
          "startTLS",
          "startTLSAny",
          "none"
        ]
      }
    },
    {
      "Name": "ldap/attribute_id",
      "Description": "The attribute for the user ID in the LDAP",
      "Optional": true
    },
    {
      "Name": "ldap/attribute_given_name",
      "Description": "The attribute for the given name in the LDAP",
      "Optional": true
    },
    {
      "Name": "ldap/attribute_surname",
      "Description": "The attribute for the the surname in the LDAP",
      "Optional": true
    },
    {
      "Name": "ldap/attribute_fullname",
      "Description": "The attribute for the the fullname in the LDAP",
      "Optional": true
    },
    {
      "Name": "ldap/attribute_mail",
      "Description": "The attribute for the mail address in the LDAP",
      "Optional": true
    },
    {
      "Name": "ldap/attribute_group",
      "Description": "The attribute for the group in the LDAP",
      "Optional": true
    },
    {
      "Name": "ldap/group_attribute_name",
      "Description": "Name of the attribute for groups in LDAP",
      "Optional": true
    },
    {
      "Name": "ldap/group_base_dn",
      "Description": "Settings for ldap group search by member. Base dn for group search e.g.: o=ces.local,dc=cloudogu,dc=com",
      "Optional": true,
      "Default": "sn"
    },
    {
      "Name": "ldap/group_search_filter",
      "Description": "",
      "Optional": true,
      "Default": "sn"
    },
    {
      "Name": "logging/root",
      "Description": "Set the root log level to one of ERROR, WARN, INFO, DEBUG.",
      "Optional": true,
      "Default": "WARN",
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "WARN",
          "DEBUG",
          "INFO",
          "ERROR"
        ]
      }
    },
    {
      "Name": "container_config/memory_limit",
      "Description": "Limits the container's memory usage. Use a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte).",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      }
    },
    {
      "Name": "container_config/swap_limit",
      "Description": "Limits the container's swap memory usage. Use zero or a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte). 0 will disable swapping.",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      }
    },
    {
      "Name": "container_config/java_max_ram_percentage",
      "Description": "Limits the heap stack size of the CAS process to the configured percentage of the available physical memory when the container has more than approx. 250 MB of memory available. Is only considered when a memory_limit is set. Use a valid float value with decimals between 0 and 100 (f. ex. 55.0 for 55%). Default value for CAS: 25%",
      "Optional": true,
      "Default": "25.0",
      "Validation": {
        "Type": "FLOAT_PERCENTAGE_HUNDRED"
      }
    },
    {
      "Name": "container_config/java_min_ram_percentage",
      "Description": "Limits the heap stack size of the CAS process to the configured percentage of the available physical memory when the container has less than approx. 250 MB of memory available. Is only considered when a memory_limit is set. Use a valid float value with decimals between 0 and 100 (f. ex. 55.0 for 55%). Default value for CAS: 50%",
      "Optional": true,
      "Default": "50.0",
      "Validation": {
        "Type": "FLOAT_PERCENTAGE_HUNDRED"
      }
    }
  ],
  "Volumes": [
    {
      "Name": "data",
      "Path": "/var/lib/cas",
      "Owner": "1000",
      "Group": "1000",
      "NeedsBackup": true
    }
  ],
  "ExposedCommands": [
    {
      "Name": "service-account-create",
      "Description": "Creates a new service account",
      "Command": "/create-sa.sh"
    },
    {
      "Name": "service-account-remove",
      "Description": "Removes an existing service account",
      "Command": "/remove-sa.sh"
    },
    {
      "Name": "pre-upgrade",
      "Command": "/pre-upgrade.sh"
    }
  ],
  "HealthChecks": [
    {
      "Type": "tcp",
      "Port": 8080
    },
    {
      "Type": "state"
    }
  ]
}
