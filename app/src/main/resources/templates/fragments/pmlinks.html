<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

    <title>Password Management Links Fragment</title>
    <link href="../../static/css/cas.css" rel="stylesheet" th:remove="tag"/>
</head>

<script th:fragment="fragments/scripts">
    console.log("WorkedS")
</script>

<body>
<div th:fragment="pmlinks" id="pmlinks" class="my-2">
    <form th:if="${passwordManagementEnabled}" method="post" id="passwordManagementForm">
        <input type="hidden" name="execution" th:value="${flowExecutionKey}"/>
        <input type="hidden" name="_eventId" value="resetPassword"/>
        <span class="fa fa-unlock"></span>
        <a id="forgotPasswordLink" th:utext="#{screen.pm.button.resetPassword}" href="javascript:void(0)"
           onclick="document.getElementById('passwordManagementForm').submit();"/>
    </form>
    <br>
    <form th:if="${passwordManagementEnabled}" method="post" id="passwordManagementUserForm">
        <input type="hidden" name="execution" th:value="${flowExecutionKey}"/>
        <input type="hidden" name="_eventId" value="forgotUsername"/>
        <span class="fa fa-unlock"></span>
        <a id="forgotUsernameLink" th:utext="#{screen.pm.button.forgotUsername}" href="javascript:void(0)"
           onclick="document.getElementById('passwordManagementUserForm').submit();"/>
    </form>

    <script>
        console.log("Loaded scripts");

        function toggleForgotPasswordInfo() {
            var x = document.getElementById("forgotPasswordInfo");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
    </script>
    <div th:unless="${passwordManagementEnabled}">
        <br/>
        <span class="fa fa-question-circle"></span>
        <div th:if="${#messages.msgOrNull('forgot.password.text') != null
                && #messages.msgOrNull('forgot.password.text') !='forgot.password.text'}">

            <button type="button" id="forgotPassword" class="link-underlined btn btn-primary right"
                    aria-label="${passwordForgot}"
                    onclick="toggleForgotPasswordInfo(); return false;"
                    th:text="#{passwordForgot}">
            </button>

            <p style="display:block;" id="forgotPasswordInfo" th:text="#{forgot.password.text}"></p>
        </div>
    </div>
</div>
</body>

</html>
